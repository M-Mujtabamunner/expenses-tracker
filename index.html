<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense Tracker Pro</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#0f172a;
  --card:#020617;
  --accent:#38bdf8;
  --text:#e5e7eb;
}
*{box-sizing:border-box;font-family:system-ui}
body{margin:0;background:var(--bg);color:var(--text)}
.container{max-width:500px;margin:auto;padding:16px}
.card{background:var(--card);padding:18px;border-radius:18px;margin-bottom:14px}
h1,h2{text-align:center}
input,select,button{
  width:100%;padding:14px;margin:6px 0;
  border-radius:12px;border:none;font-size:15px
}
button{background:var(--accent);font-weight:700;cursor:pointer}
.secondary{background:#1e293b;color:white}
.expense{display:flex;flex-direction:column;gap:6px;margin-top:10px}
.row{display:flex;justify-content:space-between;align-items:center}
.badge{padding:4px 8px;border-radius:8px;font-size:12px}
.home{background:#22c55e}
.outdoor{background:#f97316}
.food{background:#eab308}
.travel{background:#60a5fa}
.need{background:#84cc16}
.wish{background:#f472b6}
.optional{background:#64748b}
.hidden{display:none}
.small{font-size:13px;color:#94a3b8}
a{color:var(--accent);text-decoration:none}
canvas{margin-top:20px}
</style>
</head>

<body>

<div class="container">

<h1>üí∞ Expense Tracker</h1>

<div class="card">
<input id="name" placeholder="Expense name">
<input id="amount" type="number" placeholder="Amount">

<select id="category">
<option value="home">Home</option>
<option value="outdoor">Outdoor</option>
<option value="food">Food</option>
<option value="travel">Travel</option>
<option value="other">Other</option>
</select>

<select id="type">
<option value="need">Need</option>
<option value="wish">Wish</option>
<option value="optional">Optional</option>
</select>

<button onclick="addExpense()">Add Expense</button>
</div>

<div id="list"></div>
<h3 id="total"></h3>

<button class="secondary" onclick="showAnalysis()">üìä View Analysis</button>

<div id="analysis" class="card hidden">
<h2>Insights & Analysis ü§ñ</h2>
<p id="insights"></p>
<canvas id="pie"></canvas>
<canvas id="bar"></canvas>
<button class="secondary" onclick="hideAnalysis()">‚¨Ö Back</button>
</div>

</div>

<script>
let expenses = JSON.parse(localStorage.getItem("expenses")) || []

/* ---------- EXPENSE ---------- */
function save(){
  localStorage.setItem("expenses",JSON.stringify(expenses))
}
function addExpense(){
  if(!name.value || !amount.value) return
  expenses.push({
    name:name.value,
    amount:+amount.value,
    category:category.value,
    type:type.value
  })
  save()
  render()
  name.value = ""
  amount.value = ""
}
function remove(i){
  expenses.splice(i,1)
  save()
  render()
}
function render(){
  list.innerHTML=""
  let total=0
  expenses.forEach((e,i)=>{
    total+=e.amount
    list.innerHTML+=`
    <div class="expense card">
      <div class="row">
        <b>${e.name}</b>
        <button onclick="remove(${i})">‚ùå</button>
      </div>
      <div class="row">
        <span class="badge ${e.category}">${e.category}</span>
        <span class="badge ${e.type}">${e.type}</span>
        <span>Rs ${e.amount}</span>
      </div>
    </div>`
  })
  totalEl.textContent="Total: Rs "+total
}

/* ---------- ANALYSIS ---------- */
function showAnalysis(){
  analysis.classList.remove("hidden")
  aiInsights()
  charts()
}
function hideAnalysis(){
  analysis.classList.add("hidden")
}
function aiInsights(){
  let total=0, wish=0, cat={}
  expenses.forEach(e=>{
    total+=e.amount
    if(e.type==="wish") wish+=e.amount
    cat[e.category]=(cat[e.category]||0)+e.amount
  })
  let maxCat = Object.keys(cat).sort((a,b)=>cat[b]-cat[a])[0]
  insights.innerHTML = `
  üîç Highest spending on <b>${maxCat || "none"}</b><br>
  üí∏ Wishes are <b>${Math.round(wish/total*100||0)}%</b> of total<br>
  üìå Tip: Reduce unnecessary spending & track needs
  `
}
function charts(){
  const cat={}, type={}
  expenses.forEach(e=>{
    cat[e.category]=(cat[e.category]||0)+e.amount
    type[e.type]=(type[e.type]||0)+e.amount
  })
  new Chart(pie,{type:"pie",data:{labels:Object.keys(cat),datasets:[{data:Object.values(cat)}]}})
  new Chart(bar,{type:"bar",data:{labels:Object.keys(type),datasets:[{data:Object.values(type)}]}})
}

/* ---------- ELEMENTS ---------- */
const name=document.getElementById("name")
const amount=document.getElementById("amount")
const category=document.getElementById("category")
const type=document.getElementById("type")
const list=document.getElementById("list")
const totalEl=document.getElementById("total")
const analysis=document.getElementById("analysis")
const insights=document.getElementById("insights")

render()
</script>

</body>
</html>
